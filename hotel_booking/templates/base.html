{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Линия 45°{% endblock %}</title>

  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="stylesheet" href="{% static 'booking/style.css' %}">
  <link rel="stylesheet" href="{% static 'css/booking_custom.css' %}">

  <script src="{% static 'js/booking_slider.js' %}" defer></script>

  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #ecf0f1;
      --accent-color: #3498db;
    }
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      background: var(--secondary-color);
      color: var(--primary-color);
      line-height:1.6;
    }
    .navbar {
      display:flex; justify-content:space-between; align-items:center;
      background:var(--primary-color); padding:1rem 2rem;
    }
    .navbar-brand a {
      display:flex; align-items:center;
      font-size:1.5rem; font-weight:bold; color:var(--secondary-color);
      text-decoration:none;
    }
    .navbar-brand img {
      height:1.5em; margin-right:0.5em;
    }
    .navbar-nav, .navbar-auth {
      display:flex; gap:1rem; list-style:none; align-items:center;
    }
    .navbar-nav a, .navbar-auth a, .logout-button {
      color:var(--secondary-color); text-decoration:none; font-weight:500;
    }
    .logout-button {
      background:transparent; border:none; cursor:pointer; font:inherit;
    }
    .admin-btn {
      background:#e74c3c; color:#fff; padding:0.4rem 0.8rem; border-radius:4px;
      text-decoration:none; font-weight:bold;
    }
    .admin-btn:hover { background:#c0392b; }

    .site-content {
      max-width:1200px; margin:2rem auto; padding:1rem;
      background:#fff; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1);
    }

    .messages { margin-bottom:1rem; }
    .message { padding:0.75rem 1rem; margin-bottom:0.5rem; border-radius:4px; }
    .message.success { background:#d4edda; color:#155724; }
    .message.error   { background:#f8d7da; color:#721c24; }

    .site-footer {
      text-align:center; padding:2rem 0;
      background:var(--primary-color); color:var(--secondary-color);
      margin-top:2rem;
    }
  </style>
</head>

<body>
  <header>
    <nav class="navbar">
      <div class="navbar-brand">
        <a href="{% url 'pages:home' %}">
          <img src="{% static 'images/icon/logo.png' %}" alt="Линия 45°">Линия 45°
        </a>
      </div>

      <ul class="navbar-nav">
        <li><a href="{% url 'pages:home' %}">Главная</a></li>
        <li><a href="{% url 'pages:about' %}">О нас</a></li>
        <li><a href="{% url 'pages:services' %}">Услуги</a></li>
        <li><a href="{% url 'booking:category_list' %}">Номера и цены</a></li>
        <li><a href="{% url 'pages:reviews' %}">Отзывы</a></li>
        <li><a href="{% url 'pages:contacts' %}">Контакты</a></li>
      </ul>

      <ul class="navbar-auth">
        {% if user.is_staff %}
          <li><a href="{% url 'admin:index' %}" class="admin-btn">Админ</a></li>
        {% endif %}
        {% if user.is_authenticated %}
          <li><a href="{% url 'users:profile' %}">Привет, {{ user.username }}</a></li>
          <li>
            <form method="post" action="{% url 'logout' %}" style="display:inline;">
              {% csrf_token %}
              <button type="submit" class="logout-button">Выйти</button>
            </form>
          </li>
        {% else %}
          <li><a href="{% url 'login' %}">Войти</a></li>
          <li><a href="{% url 'users:register' %}">Регистрация</a></li>
        {% endif %}
      </ul>
    </nav>
  </header>

  <main class="site-content">
    {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}

    {% block content %}{% endblock %}
  </main>

  <footer class="site-footer">
    <p>&copy; {{ now.year }} Линия 45°. Все права защищены.</p>
  </footer>
</body>
</html>
