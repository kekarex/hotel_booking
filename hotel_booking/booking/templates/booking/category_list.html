{% extends 'base.html' %}
{% load static %}

{% block title %}Номера и цены{% endblock %}

{% block content %}
  <div class="filter-bar">
    <form method="get" class="filter-form">
      <label>Заезд: <input type="date" name="check_in" value="{{ check_in }}"></label>
      <label>Выезд: <input type="date" name="check_out" value="{{ check_out }}"></label>
      <button type="submit">Показать</button>
    </form>
  </div>

  <h1>Категории номеров</h1>
  <div class="grid-categories">
    {% for cat in categories %}
      <div class="cat-card{% if cat.available == 0 %} sold-out{% endif %}">

        {% if cat.images %}
        <div class="category-carousel">
          <button class="carousel-nav prev">&lt;</button>
          <div class="carousel-wrapper">
            <div class="slides">
              {% for img in cat.images %}
                <img src="{{ img }}" class="carousel-img" alt="{{ cat.kind }}">
              {% endfor %}
            </div>
          </div>
          <button class="carousel-nav next">&gt;</button>
        </div>
        {% endif %}

        <div class="cat-info">
          <h2>{{ cat.kind }}</h2>
          <div class="features-grid">
            <div class="feature-item">
              <img src="{% static 'images/icon/area.png' %}" alt="Площадь">
              <span>{{ cat.area }} м²</span>
            </div>
            <div class="feature-item">
              <img src="{% static 'images/icon/bed.png' %}" alt="Кровать">
              <span>{{ cat.bed_type }}</span>
            </div>
            <div class="feature-item">
              <img src="{% static 'images/icon/parking.png' %}" alt="Парковка">
              <span>{{ cat.parking }}</span>
            </div>
            <div class="feature-item">
              <img src="{% static 'images/icon/tv.png' %}" alt="Телевизор">
              <span>{{ cat.tv }}</span>
            </div>
            <div class="feature-item">
              <img src="{% static 'images/icon/ac.png' %}" alt="Кондиционер">
              <span>{{ cat.air_conditioning }}</span>
            </div>
            <div class="feature-item">
              <img src="{% static 'images/icon/wifi.png' %}" alt="Wi-Fi">
              <span>{{ cat.wifi }}</span>
            </div>
            <div class="feature-item">
              <img src="{% static 'images/icon/iron.png' %}" alt="Утюг">
              <span>{{ cat.iron }}</span>
            </div>
          </div>

          <p class="availability">Свободно {{ cat.available }} из {{ cat.total }}</p>
          {% if cat.available > 0 %}
            <a href="{{ cat.url }}" class="btn">Выбрать</a>
          {% else %}
            <span class="btn disabled">Нет мест</span>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>

  <script src="{% static 'js/category_carousel.js' %}" defer></script>
{% endblock %}
